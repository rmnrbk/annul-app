<div *ngIf="form" class="flex h-full w-full">
  <form
    [formGroup]="form"
    class="p-5 border border-gray-300 rounded-lg bg-gray-100 shadow-md w-full flex flex-col justify-between"
    (ngSubmit)="save()"
  >
    <div>
      <h2 class="text-left text-2xl mb-6 text-gray-800">
        <!-- Если выбрана одна путёвка -->
        <span *ngIf="dgs.length === 1">
          Настройки путёвки {{ dgs[0].dgCode }}
        </span>

        <!-- Если выбрано несколько -->
        <span *ngIf="dgs.length > 1">
          Редактирование ({{ dgs.length }} путёвок)
        </span>
      </h2>

      <div class="mb-4">
        <label
          for="prepaymentPercentage"
          class="block font-bold text-gray-700 mb-1"
          >Размер предоплаты, %</label
        >
        <input
          id="prepaymentPercentage"
          type="number"
          formControlName="prepayPerc"
          class="p-2 border border-gray-300 rounded text-base text-gray-700 bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 w-full"
        />

        @if(form.errors?.['prepayPercInvalid']){
        <small class="text-red-600">Некорректное значение.</small>
        }
      </div>

      <div class="form-group mb-4">
        <label for="prepaymentDate" class="block font-bold text-gray-700 mb-1"
          >Дата предоплаты</label
        >
        <input
          id="prepaymentDate"
          type="date"
          formControlName="prepayDate"
          class="p-2 border border-gray-300 rounded text-base text-gray-700 bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 w-full"
        />
      </div>

      <div class="mb-4">
        <label for="fullPaymentDate" class="block font-bold text-gray-700 mb-1"
          >Дата полной оплаты</label
        >
        <input
          id="fullPaymentDate"
          type="date"
          formControlName="payDate"
          class="p-2 border border-gray-300 rounded text-base text-gray-700 bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 w-full"
        />

        @if(form.errors?.['pprepayAndPayDateRangeInvalid']){
        <small class="text-red-600"
          >Предоплата не может быть позже оплаты.</small
        >
        }
      </div>

      <div class="mb-4">
        <label
          for="cancellationDateWithoutPenalty"
          class="block font-bold text-gray-700 mb-1"
          >Дата автоаннуляции без штрафа</label
        >
        <input
          id="cancellationDateWithoutPenalty"
          type="date"
          formControlName="autoAnnulNoFineDate"
          class="p-2 border border-gray-300 rounded text-base text-gray-700 bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 w-full"
        />
      </div>

      <div class="mb-4">
        <label
          for="autoCancellationDate"
          class="block font-bold text-gray-700 mb-1"
          >Дата автоаннуляции</label
        >
        <input
          id="autoCancellationDate"
          type="date"
          formControlName="autoAnnulDate"
          class="p-2 border border-gray-300 rounded text-base text-gray-700 bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 w-full"
        />
      </div>

      <div class="mb-4">
        <label
          for="guaranteeLetterDate"
          class="block font-bold text-gray-700 mb-1"
          >Гарантийное письмо</label
        >
        <input
          id="guaranteeLetterDate"
          type="date"
          formControlName="guaranteeLetterDate"
          class="p-2 border border-gray-300 rounded text-base text-gray-700 bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 w-full"
        />
      </div>

      <div class="mb-4">
        <label
          for="isAutoCancellationBlocked"
          class="block font-bold text-gray-700 mb-1"
          >Блокировка от автоаннуляции</label
        >
        <input
          id="isAutoCancellationBlocked"
          type="checkbox"
          formControlName="autoAnnulBlockEnabled"
          class="p-2 border border-gray-300 rounded text-base text-gray-700 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
        />
      </div>
    </div>

    <div class="flex justify-end">
      <button
        type="submit"
        class="mx-1 p-3 text-base font-bold rounded text-white bg-blue-500 hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-blue-200"
      >
        Сохранить
      </button>
      <button
        type="button"
        (click)="cancel()"
        class="mx-1 p-3 text-base font-bold rounded text-white bg-gray-600 hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-gray-200"
      >
        Отмена
      </button>
    </div>
  </form>
</div>

<div *ngIf="!form" class="text-center text-gray-400 text-xl my-10">
  <p>Выберите путёвку.</p>
</div>
